<section class="tech-stack" id="stack" aria-labelledby="stack-title">
    <h2 class="section-title" id="stack-title">Stack TÃ©cnico</h2>

    <ul class="stack-network" role="list">
        <li class="stack-node" *ngFor="let cat of categories(); trackBy: trackCat"
            [attr.aria-labelledby]="cat.id + '-title'">
            <header class="node-header">
                <div class="node-chip">
                    <i *ngIf="cat.iconClass" [class]="cat.iconClass" aria-hidden="true"></i>
                    <span class="node-title" [id]="cat.id + '-title'">{{ cat.title }}</span>
                </div>
            </header>

            <ul class="node-list" role="list">
                <li class="node-item" *ngFor="let it of cat.items; let i = index; trackBy: trackItem"
                    (click)="toggleItem(itemId(cat.id, i), $event)" (keydown)="onKeydown($event, itemId(cat.id, i))"
                    [class.open]="isOpen(itemId(cat.id, i))" role="button" tabindex="0"
                    [attr.aria-expanded]="isOpen(itemId(cat.id, i)) ? 'true' : 'false'"
                    [attr.aria-controls]="itemId(cat.id, i) + '-desc'">

                    <span class="icon-wrap" [attr.data-level]="it.level || 'solid'">
                        <i *ngIf="it.iconClass" [class]="it.iconClass" aria-hidden="true"></i>
                        <img *ngIf="!it.iconClass && it.iconUrl" [src]="it.iconUrl" alt="" loading="lazy"
                            decoding="async" />
                    </span>

                    <div class="label-wrap">
                        <span class="node-label">{{ it.label }}</span>
                        <span *ngIf="it.about" class="node-about">{{ it.about }}</span>
                    </div>

                    <!-- Desktop: hover | Mobile: .open -->
                    <div *ngIf="it.about" class="desc" [id]="itemId(cat.id, i) + '-desc'"
                        [attr.aria-hidden]="isOpen(itemId(cat.id, i)) ? 'false' : 'true'">
                        <strong>{{ it.label }}</strong>
                        <p>{{ it.about }}</p>
                    </div>
                </li>
            </ul>
        </li>
    </ul>
</section>